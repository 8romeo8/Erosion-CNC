#ifndef STATE_H
#define STATE_H

/* 20.07.2025    8romeo8@list.ru       (+79780592624)
   Класс для хранения состояния машины и переходов между состояниями.

   DefaultState =>  Состояние принимается после загрузки и парсинга dxf файла.
				Состояние по умолчанию.
				Это состояние означает , что только загрузили траекторию
				и не создали еще траекторию обработки. В этом состоянии
				отрисовывается только траектория закгруженная из dxf.

   PointSelectionState => Состояние выбора первичной точки старта программы.
						  В этом состоянии при подведении мыши к точкам сустейна
						  должны подсвечиваться варианты выбора.

   PathSelectionState => Состояние выбора траектории движения машины.
						 На этом этапе будут выводиться и отрисовываться дополнительно
						 стрелочки направления движения при условии что в точке несколько
						 направлений.

   EquidistantSelectionState =>  Состояние выбора направления смещения траектории на эквидистанту.
								  В этом состоянии пользователь указывает, в какую сторону
								  (внутрь/наружу) нужно сместить траекторию,
								  а система визуализирует возможные варианты.

   PathGenerationState => Состояние, в котором система формирует итоговую траекторию движения станка
						  на основе выбранных параметров(стартовой точки, направления, смещения и т. д.).
						   В этом состоянии отображается финальный путь,
							по которому будет двигаться инструмент.

   ReadyToStartState => Состояние, в котором траектория обработки полностью сформирована,
						но программа ещё не запущена.
						В этом режиме можно проверить путь, внести последние
						корректировки или подготовить станок к работе.

  ZeroCalibrationState => Состояние, в котором станок выполняет процедуру поиска
						  нулевой точки (например, центра отверстия).
						  Включает последовательное касание инструмента к краям детали по осям X/Y,
						  после чего система вычисляет и устанавливает новую нулевую позицию.

  RunningWithCoolantState => Состояние, в котором станок выполняет программу
  							 с включенной системой охлаждения (СОЖ)
							 и активным частотником (управление скоростью шпинделя).

  DryRunningState => Состояние, в котором станок выполняет программу
					  без системы охлаждения (СОЖ выключена),
					  а значит, и частотник отключен (или работает в минимальном режиме).

  PausedState => Состояние временной остановки выполнения программы с возможностью возобновления.
				 Все системы остаются в текущем режиме, но движение приостановлено.

  EndProgramState => Програма дошла до конца.

  RewindState => Движение в обратном направлении.

  RapidMoveState => Позиционирование над выбранной точкой
*/

enum Status{
	  DefaultState,PointSelectionState,PathSelectionState,EquidistantSelectionState,
	  PathGenerationState,ReadyToStartState,ZeroCalibrationState,RunningWithCoolantState,
	  DryRunningState,PausedState,EndProgramState,RapidMoveState
};

#include <vector>

class State{
public:
	void onPaint(TCanvas Canva);    //Дополнительная отрисовка в зависимости от состояния машины
	Status getState();         		//Возвращает статус
	void setState(Status st);  		//Функция будет выставлять текущий актуальный статус
    bool isValidState(Status st);   //Функция проверяет возможность перехода в указаное состояние
};

#endif
