    #include "State.h"


    State::State() : currentState(DefaultState) {
        initializeTransitions();
	}
    // Дополнительная отрисовка в зависимости от состояния машины
	void State::onPaint(TCanvas Canvas) {
        // Реализация отрисовки в зависимости от currentState
    }

    // Возвращает текущий статус
	Status State::getState() const {
        return currentState;
    }

    // Установка нового состояния с проверкой валидности перехода
	bool State::setState(Status newState) {
        if (isValidTransition(newState)) {
            currentState = newState;
            return true;
        }
        return false;
    }

    // Проверка возможности перехода в указанное состояние
	bool State::isValidTransition(Status newState) const {
        auto it = validTransitions.find(currentState);
        if (it != validTransitions.end()) {
            const std::vector<Status>& allowedStates = it->second;
            return std::find(allowedStates.begin(), allowedStates.end(), newState) != allowedStates.end();
        }
        return false;
    }

	// Обработка нажатия мыши (может вызывать переход между состояниями)
	void State::isMouseDown(int x, int y) {
        // Реализация обработки клика в зависимости от currentState
	}

    //Обработка перемещения мыши
	void State::isMouseMove(int x, int y)
	{

	}